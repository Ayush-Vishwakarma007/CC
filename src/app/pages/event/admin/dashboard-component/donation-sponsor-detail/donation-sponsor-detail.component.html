<div class="padd-area">
  <!-- top Search Section -->
  <div class="main-search-top">
    <div class="grid-button">
      <button (click)="changeList('card')" [ngClass]="listType == 'card' ? 'active' : ''">
        <!-- <img alt="" class="bluegridicon" src="assets/icon/squares-b.svg">-->
        <i class="icon-squares-b newicon"></i>
      </button>
      <button (click)="changeList('table')" [ngClass]="listType == 'table' ? 'active' : ''">
        <!-- <img alt="" class="bluegridicon" src="assets/icon/menu-b.svg">
        <img alt="" class="whitegridicon" src="assets/icon/menu-w.svg"> -->
        <i class="icon-menu-w newicon"></i>
      </button>
    </div>
    <div class="searchmember">
      <mat-form-field class="example-full-width map-url searchform">
        <mat-label> {{'event.dashboard.donation.search.text' | translate}}</mat-label>
        <input (change)="memberData($event.target.value)" [(ngModel)]="search" autocomplete="off" matInput type="text">
      </mat-form-field>
      <button type="button" class="search-button"> Search </button>
    </div>
    <div class="memexport" [ngClass]="currentTab == 'donor' ? 'top-export-button-main-donation' : 'top-export-button-main'">
      <button (click)="export()" *ngIf="eventDetail['admin']">
        <img alt="" src="assets/icon/upload.svg"> {{'event.dashboard.donation.export.Btn.text' | translate}}
      </button>
    </div>
    <div class="top-export-button-main memexport">
      <button (click)="openModalWithClass2(template1); formReset()" *ngIf="eventDetail['admin'] && currentTab == 'sponsor'"> {{'event.dashboard.donation.addSponsor.Btn.text' | translate}}
      </button>
    </div>
    <div class="top-export-button-main memexport">
      <button (click)="openModalWithClass(template); formReset()" *ngIf="eventDetail['admin'] && currentTab == 'donor'"> {{'event.dashboard.donation.addDonor.Btn.text' | translate}}
      </button>
    </div>
    <div class="clear"></div>
  </div>
  <!-- top Search Section -->
  <!-- card  Section -->
  <div *ngIf="listType == 'card'" class="row eventdash card-responsive">
    <div *ngFor="let member of userList?.content;let i=index" class="col-sm-6 col-md-4 col-lg-3">
      <div class="grid-card-box">
        <div class="topbutton-thumb">
          <div *ngIf="member['profileShow'] == true" class="charector-mem imagethumb">
            <img alt="" src="{{member['profileUrl']}}">
          </div>
          <div *ngIf="member['profileShow'] == false" class="charector-mem">
            <i>{{member['profileUrl']}}</i>
          </div>
          <button (click)="deleteSponsorDonor(member.id)" *ngIf="eventDetail['admin']" class="emailbutton">
            <img alt="" class="newicon icon-edit-member" src="assets/icon/close.png">
          </button>
          <button *ngIf="currentTab == 'sponsor' && eventDetail['admin']" (click)="edit(member,template1)" class="emailbutton">
            <i aria-hidden="true" class="newicon icon-edit-member"></i>
          </button>
          <button *ngIf="currentTab == 'donor' && eventDetail['admin']" (click)="edit(member,template)" class="emailbutton">
            <i aria-hidden="true" class="newicon icon-edit-member"></i>
          </button>
          <button *ngIf="eventDetail['admin'] || eventDetail['admin']" (click)="userNoti(member['id']); openModalWithNotif(template03)" class="emailbutton" data-target="#exampleModalnotification" data-toggle="modal">
            <!-- <img alt="" src="assets/icon/email-member.svg"> -->
            <i class="fa fa-envelope " aria-hidden="true"></i>
          </button>
          <button *ngIf="eventDetail['admin']" (click)="getNotificationReceipt(member['id'])" class="emailbutton">
            <!-- <img alt="" src="assets/icon/email-member.svg"> -->
            <!-- <i class="fa fa-sticky-note-o " aria-hidden="true"></i> -->
            <svg xmlns="http://www.w3.org/2000/svg" width="17.41" height="17.814" viewBox="0 0 20.41 20.814">
              <g id="bill" transform="translate(-3.918 0)">
                <path id="Path_15046" data-name="Path 15046" d="M18.226,307.6v-1.971H3.918V307.6a3.047,3.047,0,0,0,3.051,3.051H21.088A3.049,3.049,0,0,1,18.226,307.6Z" transform="translate(0 -289.839)" fill="#00c7e2"/>
                <path id="Subtraction_5" data-name="Subtraction 5" d="M3547.047,905.538h-.189a3.035,3.035,0,0,1-2.861-3.051v-1.97h-10.744V884.75l2.807,2.484,2.808-2.511,2.807,2.511,2.808-2.511,2.807,2.511,2.808-2.484v17.736a3.033,3.033,0,0,1-.891,2.16A3.075,3.075,0,0,1,3547.047,905.538Zm-9.745-10.07a.81.81,0,0,0,0,1.62h8.773a.81.81,0,1,0,0-1.62Zm0-3.779a.81.81,0,0,0,0,1.62h4.994a.81.81,0,1,0,0-1.62Z" transform="translate(-3525.771 -884.724)" fill="#2ed8ef"/>
              </g>
            </svg>
          </button>
          <div class="clear"></div>
        </div>
        <h4>{{member['firstName'] | titlecase }} {{member['lastName'] | titlecase}}</h4>
        <p class="member-number"><span *ngIf="member?.memberNumber">{{member['memberNumber']}}</span> </p>

        <span class="icon-village newicon" *ngIf="member['country']">{{member['city']}}
          <b>| {{member['country']}}</b>
        </span>
        <p *ngIf="eventDetail['admin']">
          <!-- <img alt="" src="assets/icon/email-member.svg"> -->
          <i *ngIf="member['email']" class="fa fa-envelope" aria-hidden="true"></i> {{member['email']}} </p>
        <p *ngIf="eventDetail['admin']">
          <i class="icon-donors newicon icon-color-donation"></i> 
          {{member['finalAmount'] | currency:'USD'}} <span *ngIf="member['successfulPayment']" class="tegs-img-donationSponsor">{{'event.dashboard.donation.table.header.paymentStatus.paid.text' | translate}}</span>
          <span *ngIf="!member['successfulPayment']" class="pending-color">{{'event.dashboard.donation.table.header.paymentStatus.pending.text' | translate}}</span>
          <span>{{member?.sponsorshipCategory?.categoryName}}</span>

        </p>
      </div>
    </div>
  </div>
  <!-- card  Section -->
</div>

<!-- table  Section -->
<div *ngIf="listType == 'table'" class="new-member-tab table-padding">
  <table>
    <tr class="topbox">
      <th *ngIf="currentTab == 'sponsor'"></th>
      <th (click)="sort('name')" [ngClass]="reqData['sort']['sortBy'] != 'FIRST_NAME' ? '' : '' || reqData['sort']['sortBy'] == 'FIRST_NAME' && reqData['sort']['orderBy'] == 'ASC'  ? 'asc' : 'desc'" class="sortable">{{'event.dashboard.donation.table.header.name.text' | translate}}
      </th>
      <th>Chapter Name</th>
      <th>{{'event.dashboard.donation.table.header.planType.text' | translate}}</th>
      <th>{{'event.dashboard.donation.table.header.displayName.text' | translate}}</th>
      <!-- <th (click)="sort('address')"
    [ngClass]="reqData['sort']['sortBy'] != 'ADDRESS' ? '' : '' || reqData['sort']['sortBy'] == 'ADDRESS' && reqData['sort']['orderBy'] == 'ASC'  ? 'asc' : 'desc'"
    class="sortable">{{'event.dashboard.donation.table.header.address.text' | translate}}
</th> -->
      <!-- <th (click)="sort('phone')" *ngIf="eventDetail['admin']"
    [ngClass]="reqData['sort']['sortBy'] != 'PHONE' ? '' : '' || reqData['sort']['sortBy'] == 'PHONE' && reqData['sort']['orderBy'] == 'ASC'  ? 'asc' : 'desc'"
    class="sortable">{{'event.dashboard.donation.table.header.phone.text' | translate}}
</th> -->
      <th (click)="sort('date')" [ngClass]="reqData['sort']['sortBy'] != 'DATE' ? '' : '' || reqData['sort']['sortBy'] == 'DATE' && reqData['sort']['orderBy'] == 'ASC'  ? 'asc' : 'desc'" class="sortable">{{'event.dashboard.donation.table.header.date.text' | translate}}
      </th>
      <th *ngIf="currentTab == 'sponsor'">{{'event.dashboard.donation.table.header.expiryDate.text' | translate}}</th>
      <th (click)="sort('totalPayment')" [ngClass]="reqData['sort']['sortBy'] != 'TOTAL_PAYMENT' ? '' : '' || reqData['sort']['sortBy'] == 'TOTAL_PAYMENT' && reqData['sort']['orderBy'] == 'ASC'  ? 'asc' : 'desc'" class="sortable">{{'event.dashboard.donation.table.header.totalamount.text' | translate}}
      </th>
      <th *ngIf="eventDetail['admin']">{{'event.dashboard.donation.table.header.paymentMethod.text' | translate}}</th>
      <th *ngIf="eventDetail['admin']" (click)="sort('paymentStatus')" [ngClass]="reqData['sort']['sortBy'] != 'PAYMENT' ? '' : '' || reqData['sort']['sortBy'] == 'PAYMENT' && reqData['sort']['orderBy'] == 'ASC'  ? 'asc' : 'desc'" class="sortable">{{'event.dashboard.donation.table.header.paymentStatus.text' | translate}}</th>
      <th *ngIf="eventDetail['admin'] && currentTab != 'sponsor'">{{'event.dashboard.donation.table.header.anonymous.text' | translate}}</th>
      <th width="100" *ngIf="eventDetail['admin'] || eventDetail['admin']">{{'event.dashboard.donation.table.header.action.text' | translate}}</th>
    </tr>
    <tbody>
    <tr *ngFor="let mainuser of userList?.content;let i=index">
      <td *ngIf="currentTab == 'sponsor'">
        <div class="imagealign">
          <div class="iconsponsors">
            <img *ngIf="mainuser['logo'] != null && mainuser['logo'] != ''" [src]="mainuser['logo']| eventImages">
            <img *ngIf="mainuser['logo'] == null || mainuser['logo'] == ''" src="assets/images/No_Logo_Image.png">
          </div>
        </div>
      </td>
      <td>{{mainuser['firstName'] | titlecase}} {{mainuser['lastName'] | titlecase}}
        <span *ngIf="mainuser?.memberNumber">{{mainuser['memberNumber']}}</span>
        <span *ngIf="eventDetail['admin']">{{mainuser['email']}}</span>
      </td>
      <td>{{mainuser?.chapterName}}</td>
      <td>{{mainuser?.sponsorshipCategory?.categoryName}}</td>
      <td>{{mainuser?.displayName}}</td>
      <!-- <td>{{mainuser['addressLine1']}}
<span>{{mainuser['city']}}
<b *ngIf="mainuser['country']">| {{mainuser['country']}}</b>
</span>
</td> -->
      <!-- <td *ngIf="eventDetail['admin']">{{mainuser['phone']}}</td> -->
      <td>{{mainuser['dateTime'] | date:'MMM d, y'}} </td>
      <td *ngIf="currentTab == 'sponsor'">
        <p *ngIf="mainuser['expiryDate'] != null && mainuser['expiryDate'] != ''">{{mainuser['expiryDate'] | date:'MMM d, y'}}</p>
        <p *ngIf="mainuser['expiryDate'] == null || mainuser['expiryDate'] == ''">{{'event.dashboard.donation.table.header.expiryDate.lifeTime.text' | translate}}</p>
      </td>
      <td>
        <p *ngIf="mainuser['refunded'] == false">
          {{mainuser['finalAmount'] | currency:'USD'}}
        </p>
        <p *ngIf="mainuser['refunded'] == true">${{mainuser['refundedAmount']}}</p>
      </td>
      <td *ngIf="eventDetail['admin']">{{mainuser['paymentMethodUsed']}}</td>
      <td>
        <p *ngIf="mainuser['successfulPayment'] && mainuser['refunded'] == false">{{'event.dashboard.donation.table.header.paymentStatus.paid.text' | translate}}</p>
        <p *ngIf="!mainuser['successfulPayment']">{{'event.dashboard.donation.table.header.paymentStatus.pending.text' | translate}}</p>
        <p *ngIf="mainuser['refunded'] == true">Refund</p>
        <div class="dropdown dropup moredrop editgallery iconrefund-m" *ngIf="mainuser['refunded'] == true">
          <a aria-expanded="false" aria-haspopup="true" class="btn btn-secondary dropdown-toggle iconrefund" data-toggle="dropdown" href="#" id="dropdownMenuLink" role="button">
            <i class="icon-info newicon" type="button"></i>
          </a>
          <div aria-labelledby="dropdownMenuLink" class="dropdown-menu">
            <p><b>Amount</b>: $ {{mainuser['refundedAmount']}}</p>
            <p *ngIf="mainuser['refundedManually']==true"><b>Manually</b> : Yes</p>
            <p *ngIf="mainuser['refundedManually']==false"><b>Manually</b> : No</p>
            <p><b>Reason</b> : {{mainuser['refundReason']}}</p>
          </div>
        </div>
      </td>
      <td *ngIf="eventDetail['admin'] && currentTab != 'sponsor'">
        <p *ngIf="mainuser['anonymousDonation'] == true">{{'event.dashboard.donation.table.header.anonymous.true.text' | translate}}</p>
        <p *ngIf="mainuser['anonymousDonation'] == false">{{'event.dashboard.donation.table.header.anonymous.false.text' | translate}}</p>
      </td>
      <td *ngIf="eventDetail['admin']">
        <!-- <a *ngIf="eventDetail['admin']" (click)="getNotificationReceipt(mainuser['id'])">
<img class="small-icon" src="assets/icon/receipt_icon.png">
</a> -->
        <div class="dropdown dropup moredrop editgallery">
          <a aria-expanded="false" aria-haspopup="true" class="btn btn-secondary dropdown-toggle " data-toggle="dropdown" href="#" id="dropdownMenuLink" role="button">
            <img alt="" src="assets/icon/interface.svg">
          </a>
          <div aria-labelledby="dropdownMenuLink" class="dropdown-menu">
            <a *ngIf="currentTab == 'sponsor' && eventDetail['admin']" (click)="edit(mainuser,template1)" class="dropdown-item" data-target="#exampleModaleditmember" data-toggle="modal"><i aria-hidden="true" class="fa fa-angle-right"></i> {{'event.dashboard.donation.table.header.action.edit.text' | translate}}</a>
            <a *ngIf="currentTab == 'donor' && eventDetail['admin']" (click)="edit(mainuser,template)" class="dropdown-item" data-target="#exampleModaleditmember" data-toggle="modal"><i aria-hidden="true" class="fa fa-angle-right"></i> {{'event.dashboard.donation.table.header.action.edit.text' | translate}}</a>
            <a *ngIf="eventDetail['admin']" (click)="deleteSponsorDonor(mainuser.id)" class="dropdown-item"><i aria-hidden="true" class="fa fa-angle-right"></i> {{'event.dashboard.donation.table.header.action.delete.text' | translate}}</a>
            <a (click)="userNoti(mainuser['id'])" class="dropdown-item emailbutton" data-target="#exampleModalnotification" data-toggle="modal"><i aria-hidden="true" class="fa fa-angle-right"></i> {{'event.dashboard.donation.table.header.action.notification.text' | translate}}</a>
            <a *ngIf="eventDetail['admin']" (click)="getNotificationReceipt(mainuser['id'])" class="dropdown-item"><i aria-hidden="true" class="fa fa-angle-right"></i> {{'event.dashboard.donation.table.header.action.getReceipt.text' | translate}}</a>
            <a *ngIf="eventDetail['admin']" (click)="viewNotificationReceipt(mainuser['id'])" class="dropdown-item"><i aria-hidden="true" class="fa fa-angle-right"></i> View Receipt</a>
            <a *ngIf="eventDetail['admin'] && mainuser['refunded'] == false" (click)="openModalWithClassRefund(template5,mainuser['id'])" class="dropdown-item"><i aria-hidden="true" class="fa fa-angle-right"></i> Refund </a>
            <a *ngIf="eventDetail['admin'] && mainuser['refunded'] == true" (click)="alredyRefund()" class="dropdown-item"><i aria-hidden="true" class="fa fa-angle-right"></i> Refund </a>

          </div>
        </div>
      </td>
    </tr>
    </tbody>
  </table>
</div>
<!-- table  Section -->


<div class="pegination-main">
  <ul>
    <li>
      <button (click)="pagination('current','user',0)" [disabled]="userList['first'] == true" class="next">
        First
      </button>
    </li>
    <li>
      <button (click)="pagination('prev','user')" [disabled]="userList['first'] == true" class="arrow">
        <i aria-hidden="true" class="icon-left-arrow icon"></i>
      </button>
    </li>
    <li (click)="pagination('current','user',i)" *ngFor="let i of totalPages1" [ngClass]="reqData.page.pageNumber == i ?  'blue-peg' : ''">
      <button class="numeric">{{i + 1}}</button>
    </li>
    <li>
      <button (click)="pagination('next','user')" [disabled]="userList['last'] == true" class="arrow">
        <i aria-hidden="true" class="icon-right-arrow icon"></i>
      </button>
    </li>
    <li>
      <button (click)="pagination('current','user',(userList['totalPages']-1))" [disabled]="userList['last'] == true" class="next">Last
      </button>
    </li>
  </ul>
  <div class="totalShow"><span>Total :</span> {{userList['totalElements']}}</div>
</div>


<ng-template #template03>
  <div class="modal-dialog infomainpopup" role="document">
    <form [formGroup]="notificationForm">
      <div class="modal-content">
        <div class="modal-header">
          <h5 class="modal-title" id="exampleLabel"> {{'event.dashboard.donation.notification.popup.title' | translate}} </h5>
          <button (click)="modalRef2.hide()" aria-label="Close" id="closeModel" class="close-container" data-dismiss="modal">
            <div class="leftright"></div>
            <div class="rightleft"></div>
          </button>
        </div>
        <div class="modal-body">
          <div class="notarea">
            <mat-form-field class="example-full-width map-url">
              <mat-label> {{'event.dashboard.donation.notification.popup.subjectlbl.text' | translate}}</mat-label>
              <input formControlName="subject" matInput>
            </mat-form-field>
            <div *ngIf="this.submitBtn == false && notificationForm.controls.subject.errors ">
              <span *ngIf="this.submitBtn == false && notificationForm.controls.subject.errors " class="valid-msg">Subject is Required</span>
            </div>
            <div class="editor-main">
              <span class="sub-head"> {{'event.dashboard.donation.notification.popup.messagelbl.text' | translate}} </span>
              <ngx-editor [placeholder]="'Enter Description here...'" class="editor-icon" formControlName="message"></ngx-editor>
            </div>
            <div *ngIf="this.submitBtn == false && notificationForm.controls.message.errors ">
              <span *ngIf="this.submitBtn == false && notificationForm.controls.message.errors " class="valid-msg martopmsg">Message is Required</span>
            </div>
            <!-- <mat-form-field class="example-full-width martopmsg">
  <mat-label>Message</mat-label>
  <textarea matInput placeholder="Enter Here..."></textarea>
</mat-form-field> -->
          </div>
        </div>
        <div class="modal-footer text-aligncenter">
          <button class="btn btn-secondary" (click)="modalRef2.hide()" id="deleteNoti" type="button">{{'event.dashboard.donation.notification.popup.cancel.Btn.text' | translate}}</button>
          <button (click)="submitNotification()" class="save-changes" type="button">{{'event.dashboard.donation.notification.popup.send.Btn.text' | translate}}</button>
        </div>
      </div>
    </form>
  </div>
</ng-template>

<!-- <div aria-hidden="true" aria-labelledby="exampleModalLabel" class="modal fade" id="exampleModalnotification"
     role="dialog"
     tabindex="-1">
  <div class="modal-dialog infomainpopup" role="document">
    <form [formGroup]="notificationForm">
      <div class="modal-content">
        <div class="modal-header">
          <h5 class="modal-title" id="exampleLabel"> {{'event.dashboard.donation.notification.popup.title' | translate}}  </h5>
          <button aria-label="Close" class="close" data-dismiss="modal" type="button">
            <span aria-hidden="true">&times;</span>
          </button>
        </div>
        <div class="modal-body">
          <div class="notarea">
            <mat-form-field class="example-full-width map-url">
              <mat-label> {{'event.dashboard.donation.notification.popup.subjectlbl.text' | translate}}</mat-label>
              <input formControlName="subject" matInput>
            </mat-form-field>
            <div *ngIf="this.submitBtn == false && notificationForm.controls.subject.errors ">
              <span *ngIf="this.submitBtn == false && notificationForm.controls.subject.errors " class="valid-msg">Subject is Required</span>
            </div>
            <div class="editor-main">
              <span class="sub-head"> {{'event.dashboard.donation.notification.popup.messagelbl.text' | translate}} </span>
              <ngx-editor [placeholder]="'Enter Description here...'" class="editor-icon"
                              formControlName="message"></ngx-editor>
            </div>
            <div *ngIf="this.submitBtn == false && notificationForm.controls.message.errors ">
              <span *ngIf="this.submitBtn == false && notificationForm.controls.message.errors "
                    class="valid-msg martopmsg">Message is Required</span>
            </div>
          </div>
        </div>
        <div class="modal-footer text-aligncenter">
          <button class="btn btn-secondary" data-dismiss="modal" id="deleteNoti" type="button">{{'event.dashboard.donation.notification.popup.cancel.Btn.text' | translate}}</button>
          <button (click)="submitNotification()" class="save-changes" type="button">{{'event.dashboard.donation.notification.popup.send.Btn.text' | translate}}</button>
        </div>
      </div>
    </form>
  </div>
</div> -->

<!-- Add Sponsor Modal -->
<ng-template #template1>
  <i id="editSponsorModal" (click)="openModalWithClass2(template1)"></i>
  <div class="modal-dialog add-donation newsletterpopup sponsorship" role="document">
    <div class="">
      <div class="modal-body">
        <button (click)="modalRef.hide()" aria-label="Close" id="closeModel" class="close-container" data-dismiss="modal">
          <div class="leftright"></div>
          <div class="rightleft"></div>
        </button>
        <div class="tabhead-icon">
          <i class="icon-sponsors newicon"></i>
        </div>
        <h5 *ngIf="editId == ''">{{'donationSponsorship.chapterSponsorship.addSponsor.popup.title' | translate}} </h5>
        <h5 *ngIf="editId != ''">{{'donationSponsorship.chapterSponsorship.editSponsor.popup.title' | translate}} </h5>
        <div class="row ">
          <div class="col-md-12 text-center">
            <button (click)="openModalWithClass3(template2); search_Member = ''; memberList= [];" class="addmember" type="button">Search Member</button>
          </div>
        </div>
        <form [formGroup]="addSponsorForm" class="example-form ">
          <div class="row">
            <div class="col-md-12 text-center">
              <mat-form-field class="paymenttyep">
                <mat-label>{{'donationSponsorship.chapterSponsorship.addSponsor.popup.slectPlan.lbl.text' | translate}}</mat-label>
                <mat-select formControlName="categoryId">
                  <mat-option value="Select Plan">Select Plan</mat-option>
                  <mat-option *ngFor="let list of plan_list" value="{{list.id}}">
                    <p *ngIf="list['advertisementDays'] != -1 && list['advertisementDays'] != 0">{{list.categoryName}} ( ${{list['range']['min']}} - ${{list['range']['max']}} ) ({{'donationSponsorship.chapterSponsorship.addSponsor.popup.validity.text' | translate}} - {{list['advertisementDays']}} {{'donationSponsorship.chapterSponsorship.addSponsor.popup.validity.day.text'
                      | translate}})</p>
                    <p *ngIf="list['advertisementDays'] == -1 || list['advertisementDays'] == 0">{{list.categoryName}} ( ${{list['range']['min']}} - ${{list['range']['max']}} ) ({{'donationSponsorship.chapterSponsorship.addSponsor.popup.validity.text' | translate}} - {{'donationSponsorship.chapterSponsorship.addSponsor.popup.validity.lifeTime.text'
                      | translate}})</p>
                  </mat-option>
                </mat-select>
              </mat-form-field>
            </div>
          </div>
          <div class="row ">
            <div class="col-md-4 col-sm-4">
              <mat-form-field class="example-full-width">
                <mat-label>{{'donationSponsorship.chapterSponsorship.addSponsor.popup.fname.lbl.text' | translate}} <i>*</i></mat-label>
                <input formControlName="firstName" (keydown.space)="$event.preventDefault();" [maxLength]="15" size="15" matInput placeholder="Enter First Name" (keypress)="charOnly($event)">
              </mat-form-field>
            </div>
            <div class="col-md-4 col-sm-4">
              <mat-form-field class="example-full-width">
                <mat-label>{{'donationSponsorship.chapterSponsorship.addSponsor.popup.lname.lbl.text' | translate}} <i>*</i></mat-label>
                <input formControlName="lastName" (keydown.space)="$event.preventDefault();" [maxLength]="15" size="15" matInput placeholder="Enter Last Name" (keypress)="charOnly($event)">
              </mat-form-field>
            </div>
            <div class="col-md-4 col-sm-4">
              <mat-form-field class="example-full-width">
                <mat-label>{{'donationSponsorship.chapterSponsorship.addSponsor.popup.email.lbl.text' | translate}}</mat-label>
                <input formControlName="email" (keydown.space)="$event.preventDefault();" [maxLength]="50" size="50" matInput placeholder="Enter Email">
              </mat-form-field>
            </div>
          </div>
          <div class="row ">
            <div class="col-md-4 col-sm-4">
              <mat-form-field class="example-full-width">
                <mat-label>{{'donationSponsorship.chapterSponsorship.addSponsor.popup.phone.lbl.text' | translate}}</mat-label>
                <input (keypress)="numberOnly($event)" [maxLength]="10" [minLength]="10" formControlName="phone" matInput placeholder="Enter Phone Number">
              </mat-form-field>
              <span *ngIf="addSponsorForm.controls.phone.errors && isSubmit">
                <div *ngIf="addSponsorForm.controls.phone.errors.minlength" class="valid-msg">Please enter valid Phone Number</div>
              </span>
            </div>
            <div class="col-md-4 col-sm-4">
              <mat-form-field class="example-full-width">
                <mat-label>{{'donationSponsorship.chapterSponsorship.addSponsor.popup.paymentType.lbl.text' | translate}} <i>*</i></mat-label>
                <mat-select formControlName="paymentMethodUsed">
                  <mat-option value="Select Plan">Select Payment Type</mat-option>
                  <mat-option *ngFor="let list of paymentType_list" value="{{list.value}}">{{list.name}}</mat-option>
                </mat-select>
              </mat-form-field>
            </div>
            <!--   <div class="col-md-4 col-sm-4 " *ngIf="paymentMethod != ''">
  <mat-form-field class="example-full-width">
    <mat-label>{{'donationSponsorship.chapterSponsorship.addSponsor.popup.paymentType.lbl.text' | translate}} <i>*</i></mat-label>
    <input [value]="paymentMethod" matInput formControlName="paymentMethodUsed">
  </mat-form-field>
</div>-->
            <div class="col-md-4 col-sm-4">
              <mat-form-field class="example-full-width">
                <mat-label>{{'donationSponsorship.chapterSponsorship.addSponsor.popup.amount.lbl.text' | translate}} <i>*</i></mat-label>
                <input (keypress)="numberOnly($event)" [maxLength]="8" size="8" formControlName="amount" matInput placeholder="Enter Amount">
              </mat-form-field>
            </div>
          </div>
          <div class="row ">
            <div class="col-md-12">
              <div class="image-main-up">
                <div class="imageup create-img-upload small-upload invoice-upload">
                  <app-file-uploader-vertical #imageUpload (invalidFile)="invalidUploadFile()" (maxFileError)="maxFileError()" (maxFileSizeError)="fileSizeError()" (queueCompleted)="queueCompleted()" (uploadStarted)="uploadStarted()" [(uploadedFiles)]="logoList" [maxFileCount]="1"
                                              [uploadUrl]="mediaUploadUrl" [validTypes]="validTypesImage">
                  </app-file-uploader-vertical>
                </div>
              </div>
            </div>
          </div>
          <div class="row ">
            <div class="col-md-4 col-sm-4">
              <mat-form-field class="example-full-width">
                <mat-label>{{'donationSponsorship.chapterSponsorship.addSponsor.popup.website.lbl.text' | translate}}</mat-label>
                <input formControlName="websiteUrl" matInput placeholder="Enter Website URL ">
              </mat-form-field>
            </div>
            <div class="col-md-4 col-sm-4">
              <mat-form-field class="example-full-width">
                <mat-label>{{'donationSponsorship.chapterSponsorship.addSponsor.popup.companyName.lbl.text' | translate}}</mat-label>
                <input formControlName="companyName" [maxLength]="20" size="20" matInput placeholder="Enter Company Name" (keypress)="charOnly($event)">
              </mat-form-field>
            </div>
            <div class="col-md-4 col-sm-4">
              <mat-form-field class="example-full-width">
                <mat-label>{{'donationSponsorship.chapterSponsorship.addSponsor.popup.city.lbl.text' | translate}}</mat-label>
                <input formControlName="city" [maxLength]="15" size="15" matInput placeholder="Enter City" (keypress)="charOnly($event)">
              </mat-form-field>
            </div>
          </div>
          <div class="row ">
            <div class="col-md-4 col-sm-4">
              <mat-form-field class="example-full-width">
                <mat-label>{{'donationSponsorship.chapterSponsorship.addSponsor.popup.state.lbl.text' | translate}}</mat-label>
                <input formControlName="state" matInput [maxLength]="10" size="10" placeholder="Enter State" (keypress)="charOnly($event)">
              </mat-form-field>
            </div>
            <div class="col-md-4 col-sm-4">
              <mat-form-field class="example-full-width">
                <mat-label>{{'donationSponsorship.chapterSponsorship.addSponsor.popup.zipcode.lbl.text' | translate}}</mat-label>
                <input formControlName="zipCode" (keypress)="numberOnly($event)" [maxLength]="5" matInput placeholder="Enter Zipcode">
              </mat-form-field>
            </div>
            <div class="col-md-4 col-sm-4">
              <mat-form-field class="example-full-width">
                <mat-label>{{'donationSponsorship.chapterSponsorship.addSponsor.popup.displayName.lbl.text' | translate}}</mat-label>
                <input formControlName="displayName" [maxLength]="20" size="20" matInput placeholder="Enter Display Name">
              </mat-form-field>
            </div>
            <div [ngClass]="editId != '' ? 'col-md-8 col-sm-8' : 'col-md-12 col-sm-12'">
              <mat-form-field class="example-full-width">
                <mat-label>{{'donationSponsorship.chapterSponsorship.addSponsor.popup.address.lbl.text' | translate}}</mat-label>
                <input formControlName="addressLine1" matInput placeholder="Enter Address">
              </mat-form-field>
            </div>
            <div *ngIf="editId != ''" class="col-md-4 col-sm-4">
              <mat-form-field class="example-full-width dateinfo">
                <mat-label>{{'donationSponsorship.chapterSponsorship.addSponsor.popup.expiryDate.lbl.text' | translate}}</mat-label>
                <mat-datetimepicker-toggle [for]="datetimePicker" matSuffix></mat-datetimepicker-toggle>
                <mat-datetimepicker #datetimePicker openOnFocus="true" timeInterval="5" type="datetime">
                </mat-datetimepicker>
                <input formControlName="expiryDate" [matDatetimepicker]="datetimePicker" autocomplete="false" matInput>
              </mat-form-field>
            </div>
          </div>
          <div class="row savetop">
            <div *ngIf="editId == ''" class="col-md-4 main-screen">
              <mat-checkbox class="sendmail" formControlName="sendMail">{{'donationSponsorship.chapterSponsorship.addSponsor.popup.sendMail.chkbox.text' | translate}}</mat-checkbox>
            </div>
            <div class="col-md-4 main-screen">
              <!--              <mat-checkbox class="sendmail" formControlName="anonymousDonation">{{'donationSponsorship.chapterSponsorship.addSponsor.popup.anonymousName.chkbox.text' | translate}}</mat-checkbox>-->
            </div>
            <div *ngIf="editId != ''" class="col-md-4 main-screen">
              <mat-checkbox class="sendmail" formControlName="successfulPayment">{{'donationSponsorship.chapterSponsorship.addSponsor.popup.successfulPayment.chkbox.text' | translate}}</mat-checkbox>
            </div>
            <div class="col-md-4 main-screen">
              <div (click)="submit('sponsor')" class="btn-general">
                <div class="eff-5"></div>
                <a>{{'donationSponsorship.chapterSponsorship.addSponsor.popup.save.Btn.text' | translate}}</a></div>
            </div>
          </div>
        </form>
      </div>
    </div>
  </div>

</ng-template>
<!-- Add Sponsor Modal -->

<!-- Add Donation Modal -->
<ng-template #template>
  <i id="editDonationModal" (click)="openModalWithClass(template)"></i>
  <div class="modal-dialog add-donation newsletterpopup" role="document">
    <div class="modal-content">
      <div class="modal-body">

        <button (click)="modalRef.hide()" aria-label="Close" class="close-container">
          <div class="leftright"></div>
          <div class="rightleft"></div>
        </button>
        <div class="tabhead-icon">
          <i class="icon-donors newicon"></i>
        </div>
        <h5 *ngIf="editId == ''">{{'donationSponsorship.chapterDonation.addDonation.popup.title' | translate}}</h5>
        <h5 *ngIf="editId != ''">{{'donationSponsorship.chapterDonation.editDonation.popup.title' | translate}}</h5>

        <div class="row ">
          <div class="col-md-12 text-center">
            <button (click)="openModalWithClass3(template2) ;search_Member = ''; memberList= [];" class="addmember" type="button">{{'donationSponsorship.chapterDonation.addDonation.popup.searchMember.Btn.text' | translate}}</button>
          </div>
        </div>
        <form [formGroup]="addSponsorForm" class="example-form ">
          <div class="row">
            <div class="col-md-12 text-center">
              <mat-form-field class="paymenttyep">
                <mat-label>{{'donationSponsorship.chapterDonation.addDonation.popup.slectPlan.lbl.text' | translate}}</mat-label>
                <mat-select formControlName="categoryId">
                  <mat-option value="Select Plan">Select Plan</mat-option>
                  <mat-option *ngFor="let list of plan_list_donation" value="{{list.id}}">
                    {{list.categoryName}} ( ${{list['range']['min']}} - ${{list['range']['max']}} )</mat-option>
                </mat-select>
              </mat-form-field>
            </div>
          </div>
          <div class="row ">
            <div class="col-md-4 col-sm-4">
              <mat-form-field class="example-full-width">
                <mat-label>{{'donationSponsorship.chapterDonation.addDonation.popup.fname.lbl.text' | translate}} </mat-label>
                <input formControlName="firstName" (keydown.space)="$event.preventDefault();" [maxLength]="15" size="15" matInput placeholder="Enter First Name" (keypress)="charOnly($event)">
              </mat-form-field>
            </div>
            <div class="col-md-4 col-sm-4">
              <mat-form-field class="example-full-width">
                <mat-label>{{'donationSponsorship.chapterDonation.addDonation.popup.lname.lbl.text' | translate}} </mat-label>
                <input formControlName="lastName" (keydown.space)="$event.preventDefault();" [maxLength]="15" size="15" matInput placeholder="Enter Last Name" (keypress)="charOnly($event)">
              </mat-form-field>
            </div>
            <div class="col-md-4 col-sm-4">
              <mat-form-field class="example-full-width">
                <mat-label>{{'donationSponsorship.chapterDonation.addDonation.popup.email.lbl.text' | translate}}</mat-label>
                <input formControlName="email" (keydown.space)="$event.preventDefault();" [maxLength]="50" size="50" matInput placeholder="Enter Email">
              </mat-form-field>
            </div>
          </div>
          <div class="row ">
            <div class="col-md-4 col-sm-4">
              <mat-form-field class="example-full-width">
                <mat-label>{{'donationSponsorship.chapterDonation.addDonation.popup.phone.lbl.text' | translate}}</mat-label>
                <input (keypress)="numberOnly($event)" [maxLength]="10" [minLength]="10" formControlName="phone" matInput placeholder="Enter Phone Number">
              </mat-form-field>
              <span *ngIf="addSponsorForm.controls.phone.errors && isSubmit">
                <div *ngIf="addSponsorForm.controls.phone.errors.minlength" class="valid-msg">Please enter valid Phone Number</div>
              </span>
            </div>
            <div class="col-md-4 col-sm-4">
              <mat-form-field class="example-full-width">
                <mat-label>{{'donationSponsorship.chapterDonation.addDonation.popup.paymentType.lbl.text' | translate}} </mat-label>
                <mat-select formControlName="paymentMethodUsed">
                  <mat-option value="Select Plan">Select Payment Type</mat-option>
                  <mat-option *ngFor="let list of paymentType_list" value="{{list.value}}">{{list.name}}</mat-option>
                </mat-select>
              </mat-form-field>
            </div>
            <!--    <div class="col-md-4 col-sm-4 " *ngIf="paymentMethod != ''">
  <mat-form-field class="example-full-width">
    <mat-label>{{'donationSponsorship.chapterDonation.addDonation.popup.paymentType.lbl.text' | translate}} <i>*</i></mat-label>
    <input [value]="paymentMethod" matInput formControlName="paymentMethodUsed">
  </mat-form-field>
</div>-->
            <div class="col-md-4 col-sm-4">
              <mat-form-field class="example-full-width">
                <mat-label>{{'donationSponsorship.chapterDonation.addDonation.popup.amount.lbl.text' | translate}} </mat-label>
                <input (keypress)="numberOnly($event)" [maxLength]="8" size="8" formControlName="amount" matInput placeholder="Enter Amount" (blur)="onBlur($event)">
              </mat-form-field>
            </div>
          </div>
          <div class="row ">
            <div class="col-md-8">
              <mat-form-field class="example-full-width">
                <mat-label>{{'donationSponsorship.chapterDonation.addDonation.popup.address.lbl.text' | translate}}</mat-label>
                <input formControlName="addressLine1" matInput placeholder="Enter Address">
              </mat-form-field>
            </div>
            <div class="col-md-4">
              <mat-form-field class="example-full-width">
                <mat-label>{{'donationSponsorship.chapterDonation.addDonation.popup.displayName.lbl.text' | translate}}</mat-label>
                <input formControlName="displayName" [maxLength]="20" size="20" matInput placeholder="Enter Display Name">
              </mat-form-field>
            </div>
          </div>
          <div class="row ">
            <div class="col-md-4 col-sm-4">
              <mat-form-field class="example-full-width">
                <mat-label>{{'donationSponsorship.chapterDonation.addDonation.popup.city.lbl.text' | translate}}</mat-label>
                <input formControlName="city" [maxLength]="15" size="15" matInput placeholder="Enter City" (keypress)="charOnly($event)">
              </mat-form-field>
            </div>
            <div class="col-md-4 col-sm-4">
              <mat-form-field class="example-full-width">
                <mat-label>{{'donationSponsorship.chapterDonation.addDonation.popup.state.lbl.text' | translate}}</mat-label>
                <input formControlName="state" [maxLength]="10" size="10" matInput placeholder="Enter State" (keypress)="charOnly($event)">
              </mat-form-field>
            </div>
            <div class="col-md-4 col-sm-4">
              <mat-form-field class="example-full-width">
                <mat-label>{{'donationSponsorship.chapterDonation.addDonation.popup.zipcode.lbl.text' | translate}}</mat-label>
                <input (keypress)="numberOnly($event)" formControlName="zipCode" matInput [maxLength]="5" placeholder="Enter Zipcode">
              </mat-form-field>
            </div>
          </div>
          <div class="row savetop">
            <div *ngIf="editId == ''" class="col-md-4 main-screen">
              <mat-checkbox class="sendmail" formControlName="sendMail">{{'donationSponsorship.chapterDonation.addDonation.popup.sendMail.chkbox.text' | translate}}</mat-checkbox>
            </div>
            <div class="col-md-4 main-screen">
              <mat-checkbox class="sendmail" formControlName="anonymousDonation">{{'donationSponsorship.chapterDonation.addDonation.popup.anonymousName.chkbox.text' | translate}}</mat-checkbox>
            </div>
            <div *ngIf="editId != ''" class="col-md-4 main-screen">
              <mat-checkbox class="sendmail" formControlName="successfulPayment">{{'donationSponsorship.chapterDonation.addDonation.popup.successfulPayment.chkbox.text' | translate}}</mat-checkbox>
            </div>
            <div class="col-md-4 main-screen">
              <div (click)="submit('donor')" class="btn-general">
                <div class="eff-5"></div>
                <a>{{'donationSponsorship.chapterDonation.addDonation.popup.save.Btn.text' | translate}}</a></div>
            </div>
          </div>

        </form>

      </div>
    </div>
  </div>

</ng-template>
<!-- Add Donation Modal -->

<!-- Member search modal -->
<ng-template #template2>
  <div class="modal-dialog" role="document">
    <div class="modal-content">
      <div class="modal-header">
        <h5 class="modal-title" id="exampleModalLabel">{{'donationSponsorship.chapterDonation.addDonation.popup.searchMember.popup.title' | translate}} </h5>
        <!-- <button (click)="modalRef1.hide()" aria-label="Close" class="close" data-dismiss="modal" id="closeModal" type="button">
  <span aria-hidden="true">&times;</span>
</button> -->
        <button (click)="modalRef1.hide()" aria-label="Close" class="close-container">
          <div class="leftright"></div>
          <div class="rightleft"></div>
        </button>
      </div>
      <div class="modal-body">
        <div class="searchmain">
          <form class="example-form">
            <mat-form-field class="example-full-width search-popup-main">
              <mat-label>{{'donationSponsorship.chapterDonation.addDonation.popup.searchMember.popup.search.text' | translate}}</mat-label>
              <input (change)="searchNewData()" [(ngModel)]="search_Member" [ngModelOptions]="{standalone: true}" matInput placeholder="Type here...">
            </mat-form-field>
            <button class="save-changes searchmem" type="submit">Search</button>
          </form>
        </div>
        <div class="committi-main">
          <div class="committi-tab">
            <table>
              <tr>
                <th width="40"></th>
                <th>{{'donationSponsorship.chapterDonation.addDonation.popup.searchMember.popup.table.header.member.lbl.text' | translate}}</th>
                <th>{{'donationSponsorship.chapterDonation.addDonation.popup.searchMember.popup.table.header.chapter.lbl.text' | translate}}</th>
                <th>{{'donationSponsorship.chapterDonation.addDonation.popup.searchMember.popup.table.header.email.lbl.text' | translate}}</th>
                <th>{{'donationSponsorship.chapterDonation.addDonation.popup.searchMember.popup.table.header.phone.lbl.text' | translate}}</th>
                <th>{{'donationSponsorship.chapterDonation.addDonation.popup.searchMember.popup.table.header.address.lbl.text' | translate}}</th>
                <th>{{'donationSponsorship.chapterDonation.addDonation.popup.searchMember.popup.table.header.mainUser.lbl.text' | translate}}</th>
                <th>{{'donationSponsorship.chapterDonation.addDonation.popup.searchMember.popup.table.header.action.lbl.text' | translate}}</th>
              </tr>
              <tbody>
              <tr *ngFor="let list of memberList?.content;">
                <td></td>
                <td class="mem-name">
                  <div *ngIf="list['profileShow'] == true" class="charector">
                    <img alt="" src="{{list['profileUrl']}}">
                  </div>
                  <div *ngIf="list['profileShow'] == false" class="charector">
                    <i>{{list['profileUrl']}}</i>
                  </div>
                  <ul class="firstnameandemail">
                    <li> {{list['firstName'] | titlecase}} {{list['lastName'] | titlecase}} </li>
                    <li> {{list['memberNumber']}} </li>
                  </ul>
                </td>
                <td>{{list['chapterName']}}</td>
                <td>{{list['email']}}</td>
                <td>{{list['phone']}}</td>
                <td>{{list['city']}} {{list['country']}}</td>
                <td>
                  <p *ngIf="list['mainUser']">{{'donationSponsorship.chapterDonation.addDonation.popup.searchMember.popup.table.header.mainUser.yes.lbl.text' | translate}}</p>
                  <p *ngIf="!list['mainUser']">{{'donationSponsorship.chapterDonation.addDonation.popup.searchMember.popup.table.header.mainUser.no.lbl.text' | translate}}</p>
                </td>
                <td>
                  <button (click)="addMember(list)" class="addbtn " type="button"> {{'donationSponsorship.chapterDonation.addDonation.popup.searchMember.popup.table.header.action.add.Btn.text' | translate}}</button>
                </td>
              </tr>
              </tbody>
            </table>
          </div>
        </div>
        <div *ngIf="memberList?.content && memberList?.numberOfElements != memberList?.totalElements" class="pegination-main">
          <ul>
            <li>
              <button (click)="paginationNewMember('current','user',0)" [disabled]="memberList['first'] == true" class="next">
                First
              </button>
            </li>
            <li>
              <button (click)="paginationNewMember('prev','user')" [disabled]="memberList['first'] == true" class="arrow">
                <i aria-hidden="true" class="icon-left-arrow icon"></i>
              </button>
            </li>
            <li (click)="paginationNewMember('current','user',i)" *ngFor="let i of totalPages" [ngClass]="reqNewData.page.page == i ?  'blue-peg' : ''">
              <button class="numeric">{{i + 1}}</button>
            </li>
            <li>
              <button (click)="paginationNewMember('next','user')" [disabled]="memberList['last'] == true" class="arrow">
                <i aria-hidden="true" class="icon-right-arrow icon"></i>
              </button>
            </li>
            <li>
              <button (click)="paginationNewMember('current','user',(memberList['totalPages']-1))" [disabled]="memberList['last'] == true" class="next">Last
              </button>
            </li>
          </ul>
        </div>

      </div>
    </div>
  </div>
</ng-template>
<!-- Member search modal -->


<ng-template #template5>
  <div class="modal-dialog" role="document">
    <div class="modal-content">
      <div class="modal-body">
        <button (click)="closeModel();" aria-label="Close" class="close-container" data-dismiss="modal" id="closeDonationModel">
          <div class="leftright"></div>
          <div class="rightleft"></div>
        </button>
        <h2 class="refund"> Refund</h2>
        <div class="notarea">
          <div class="editor-main">
            <span class="sub-head"> Reason </span>
            <ngx-editor [(ngModel)]="refundreason" [placeholder]="'Enter Description here...'" class="editor-icon"></ngx-editor>
          </div>
          <p class="txtedit">Please make sure you refund this amount from your Merchant Account for this user.</p>
        </div>
        <div class="row">
          <div class="col-md-12 savecenter">
            <button class="search-button" (click)="refundReason();"> Save</button>
          </div>
        </div>
      </div>
    </div>
  </div>
</ng-template>
