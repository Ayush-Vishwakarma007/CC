<div class="sections-main">
  <h1>
    <div class="img-create">
      <!-- <img alt="community" src="assets/icon/picture.svg"> -->
      <svg xmlns="http://www.w3.org/2000/svg" width="30.787" height="35.386" viewBox="0 0 19.787 25.386">
        <g id="Group_53813" data-name="Group 53813" transform="translate(-8.004 -17.262)">
          <g id="Group_53812" data-name="Group 53812" transform="translate(8.254 17.511)">
            <path id="Path_44210" data-name="Path 44210" d="M38.961,165.158H26.349a.264.264,0,0,1,0-.528H38.7v-8.268a.264.264,0,1,1,.528,0v8.532A.264.264,0,0,1,38.961,165.158Zm-14.669,0H23.63a.264.264,0,0,1,0-.528h.662a.264.264,0,1,1,0,.528Z" transform="translate(-21.474 -141.451)" fill="#a3a3a3" stroke="#a3a3a3" stroke-width="0.5"/>
            <path id="Path_44211" data-name="Path 44211" d="M177.157,75.5a.264.264,0,0,1-.264-.264V71.764a.264.264,0,1,1,.528,0v3.469A.264.264,0,0,1,177.157,75.5Z" transform="translate(-159.671 -65.794)" fill="#a3a3a3" stroke="#a3a3a3" stroke-width="0.5"/>
            <path id="Path_44218" data-name="Path 44218" d="M176.3,130.98a.264.264,0,1,0,.374,0A.272.272,0,0,0,176.3,130.98Z" transform="translate(-158.996 -118.921)" fill="#a3a3a3" stroke="#a3a3a3" stroke-width="0.5"/>
            <path id="Path_44219" data-name="Path 44219" d="M27.541,18.913a1.4,1.4,0,0,0-1.4-1.4h-.933s-.517.021-3.523,0c.008-.008-11.1.031-12.029,0a1.4,1.4,0,0,0-1.4,1.4c0,.114,0,22.287,0,22.692a.793.793,0,0,0,.793.793h17.7a.793.793,0,0,0,.793-.793C27.54,31.594,27.541,19.712,27.541,18.913ZM9.655,18.041c.935.008,15.559-.013,16.485,0a.874.874,0,0,1,.873.873v2.833H8.783V18.914A.874.874,0,0,1,9.655,18.041ZM27.013,41.606a.265.265,0,0,1-.264.264H9.047a.265.265,0,0,1-.264-.264V22.276h18.23v19.33Z" transform="translate(-8.254 -17.511)" fill="#a3a3a3" stroke="#a3a3a3" stroke-width="0.5"/>
            <path id="Path_44220" data-name="Path 44220" d="M35.952,86.763h12.96a.264.264,0,1,0,0-.528H35.952a.264.264,0,1,0,0,.528Z" transform="translate(-33.797 -78.972)" fill="#a3a3a3" stroke="#a3a3a3" stroke-width="0.5"/>
            <path id="Path_44221" data-name="Path 44221" d="M35.688,220.264a.264.264,0,0,0,.264.264h12.96a.264.264,0,1,0,0-.528H35.952A.264.264,0,0,0,35.688,220.264Z" transform="translate(-32.789 -198.6)" fill="#a3a3a3" stroke="#a3a3a3" stroke-width="0.5"/>
            <path id="Path_44222" data-name="Path 44222" d="M35.952,113.516h10.9a.264.264,0,1,0,0-.528h-10.9a.264.264,0,1,0,0,.528Z" transform="translate(-33.797 -102.898)" fill="#a3a3a3" stroke="#a3a3a3" stroke-width="0.5"/>
            <path id="Path_44223" data-name="Path 44223" d="M35.952,140.269h7.971a.264.264,0,1,0,0-.528H35.952a.264.264,0,0,0,0,.528Z" transform="translate(-33.797 -126.823)" fill="#a3a3a3" stroke="#a3a3a3" stroke-width="0.5"/>
            <path id="Path_44224" data-name="Path 44224" d="M35.952,167.022h6.48a.264.264,0,1,0,0-.528h-6.48a.264.264,0,1,0,0,.528Z" transform="translate(-33.797 -150.749)" fill="#a3a3a3" stroke="#a3a3a3" stroke-width="0.5"/>
            <path id="Path_44225" data-name="Path 44225" d="M35.952,193.775H41.4a.264.264,0,1,0,0-.528H35.952a.264.264,0,1,0,0,.528Z" transform="translate(-33.797 -174.675)" fill="#a3a3a3" stroke="#a3a3a3" stroke-width="0.5"/>
            <path id="Path_44226" data-name="Path 44226" d="M35.026,31.911H24.762a.228.228,0,1,1,0-.456H34.8V30.122a.228.228,0,1,1,.456,0v1.561A.228.228,0,0,1,35.026,31.911Zm-14.9,0h-.612a.228.228,0,1,1,0-.456h.612a.228.228,0,1,1,0,.456Z" transform="translate(-17.392 -28.585)" fill="#a3a3a3" stroke="#a3a3a3" stroke-width="0.4"/>
          </g>
        </g>
      </svg>    
    </div>
      <div style="float: left; margin-top: 5px; ">Custom fields</div>
<!--    <span>{{'event.create.imageAndDescription.mainEventImage.text' | translate}}</span>     -->
  </h1>


</div>
<div class="additionnaltop">


  <!-- Section -->
  <ng-container *ngFor="let steps of formStepsWithFields;let i=index">

    <div *ngIf="steps.id" class="main-section-membership">
      <h5 class="edit-section" (click)="editSection(steps,i)">
        {{steps.stepName}}
      </h5>
      <div class="bluenumber">
        <div class="bluebox">
          <span>{{steps.index}}</span>
        </div>
        <div class="right-member">
          <div class="row martop-date">

            <div *ngFor="let field of steps.fieldValues;let c=index" class="col-md-6 margintop">
              <button (click)="editField(field,c,steps.fieldValues,i)" [ngClass]="{'active':field.active}"
                      class="btn addsection">{{field.name}}</button>
            </div>
          </div>
          <div class="row martop-date">
            <div class="col-md-6">
              <mat-form-field class="example-full-width ">
                <mat-label>Add New Field</mat-label>
                <mat-select (selectionChange)="changeFieldEvent($event.value,i)"  [(ngModel)]="steps.value" [ngModelOptions]="{standalone: true}">
                  <mat-option value="">Select Type</mat-option>
                  <mat-option *ngFor="let type of fieldTypes" [value]="type.value">
                    {{type.name}}
                  </mat-option>
                </mat-select>
              </mat-form-field>
            </div>
          </div>
        </div>
      </div>
    </div>
    <div *ngIf="i == stepArray['index']" class="lightarea">
      <form [formGroup]="fieldForm" id="fieldForm">
        <div class="lightinner">
          <div class="row" *ngIf="fieldForm.value.id != null && fieldForm.value.id != ''">
            <div class="col-md-6">
              <mat-form-field class="example-full-width ">
                <mat-label>Change Type Field</mat-label>
                <mat-select formControlName="type" (selectionChange)="changeFieldType($event.value)">
                  <mat-option value="">Select Type</mat-option>
                  <mat-option *ngFor="let type of fieldTypes" [value]="type.value">
                    {{type.name}}
                  </mat-option>
                </mat-select>
              </mat-form-field>
            </div>
          </div>
          <div class="row martop-date">
            <div class="col-md-6">
              <mat-form-field class="example-full-width ">
                <mat-label>{{stepArray.type.name}} Field Display Name</mat-label>
                <input   formControlName="name" matInput type="text">
              </mat-form-field>
            </div>
            <div class="col-md-6">
              <mat-form-field class="example-full-width ">
                <mat-label>{{stepArray.type.name}} Field Name</mat-label>
                <input  formControlName="fieldName" matInput type="text">
              </mat-form-field>
            </div>
          </div>
          <br>
          <div *ngIf="stepArray.type.allowOption == true">
            <div class="row martop-date">
              <div class="col-md-6">
                <button (click)="addOption()" class="save btn btn-primary">Add More Option</button>
              </div>
            </div>
            <div class="row martop-date">
              <div *ngFor="let option of options;let o = index;" class="col-lg-6 col-md-6">
                <div class="row">
                  <div class="col-lg-12 col-md-12">
                    <mat-form-field class="example-full-width dropfield">
                      <mat-label>{{stepArray.type.name}} Option Value</mat-label>
                      <input [(ngModel)]="option.value" [ngModelOptions]="{standalone: true}" matInput>
                    </mat-form-field>
                    <button class="removeBtn" (click)="removeOption(o)">
                      <i  class="icon-delete-blue newicon"></i>
                    </button>
                  </div>
                  <!-- <div class="removeBtn col-md-1 col-lg-1">
                    <button (click)="removeOption(o)">
                      <i  class="icon-delete-blue newicon"></i>
                    </button>
                  </div> -->
                </div>
              </div>
            </div>
          </div>
          <div class="bortopdashed">
            <div class="row">
              <div class="col-md-12 col-lg-6">
                <div class="border-country">
                  <mat-radio-group formControlName="required" aria-label="Select an option">
                    <mat-radio-button [checked]="fieldForm.value.required == true" [value]="true">Required</mat-radio-button>
                    <mat-radio-button [checked]="fieldForm.value.required == false" [value]="false">Optional</mat-radio-button>
                  </mat-radio-group>
                </div>
              </div>
              <div class="col-md-12 col-lg-6 text-right textlft">
                <button (click)="removeFiled(i,fieldForm.value.id)" class="removefield">
                  <i class="icon-delete newicon"></i> Remove Field
                </button>
                <button (click)="cancelNewFiled(i)" class="cancel">Cancel</button>
                <button (click)="submitField(i)" class="save">Save</button>
              </div>
            </div>
          </div>
        </div>
      </form>
    </div>
    <div *ngIf="steps['editSection']" class="lightarea">
      <div class="lightinner">
        <h1>Edit Section </h1>
        <form [formGroup]="sectionForm" class="example-form" id="sectionsForm">
          <div class="row martop-date">
            <div class="col-md-6">
              <mat-form-field class="example-full-width ">
                <mat-label>New Step Name</mat-label>
                <input formControlName="stepName" matInput>
              </mat-form-field>
            </div>
            <div class="col-md-6">
              <mat-form-field class="example-full-width ">
                <mat-label>New Step Detail</mat-label>
                <input formControlName="stepDetails" matInput>
              </mat-form-field>
            </div>
          </div>
        </form>
        <div class="bortopdashed">
          <div class="row">
            <div class="col-md-12 col-lg-6">
            </div>
            <div class="col-md-12 col-lg-6 text-right textlft">
              <button (click)="removeSection(steps['id'])" class="removefield">
                <i class="icon-delete newicon"></i> Remove Section
              </button>
              <button (click)="cancelSection(i)" class="cancel">Cancel</button>
              <button (click)="submitSection(steps['id'],i)" class="save">Save</button>
            </div>
          </div>
        </div>
      </div>
    </div>
  </ng-container>
  <!-- Section -->
  <div *ngIf="newSectionShow" class="lightarea" let i=index>
    <div class="lightinner">
      <h1>Add Section </h1>
      <form [formGroup]="sectionForm" class="example-form" id="sectionForm">
        <div class="row martop-date">
          <div class="col-md-6">
            <mat-form-field class="example-full-width ">
              <mat-label>New Step Name</mat-label>
              <input formControlName="stepName" matInput>
            </mat-form-field>
          </div>
          <div class="col-md-6">
            <mat-form-field class="example-full-width ">
              <mat-label>New Step Detail</mat-label>
              <input formControlName="stepDetails" matInput>
            </mat-form-field>
          </div>
        </div>
      </form>
      <div class="bortopdashed">
        <div class="row">
          <div class="col-md-12 col-lg-6">
          </div>
          <div class="col-md-12 col-lg-6 text-right textlft">
            <button (click)="newSectionShow = !newSectionShow" class="cancel">Cancel</button>
            <button (click)="submitSection()" class="save">Save</button>
          </div>
        </div>
      </div>
    </div>
  </div>
  <div class="addanothersection">
    <div class="row">
      <div class="col-md-6 col-sm-6">
        <button (click)="addSections()" class="addsection">
          + Add another section
        </button>
      </div>
      <div class="col-md-6 col-sm-6 text-right">
      </div>
    </div>
  </div>
</div>
