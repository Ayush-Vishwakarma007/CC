<section class="membership-plan-main">
    <div class="row row-eq-height m-0">
      <div class="col-xs-12 col-sm-8 col-md-9 col-lg-9 p-0">
        <div class="left-part-plan">
          <div class="header-tlt">
            <h1 *ngIf="this.checkoutArray['type'] == 'chapter'"><img (click)="goBack()"  src="assets/icon/close-new.svg"> Become a {{title}}
              for {{checkoutArray?.chapterDetail?.name}} </h1>
            <h1 *ngIf="this.checkoutArray['type'] == 'event'"><img (click)="goBack()"  src="assets/icon/close-new.svg"> Become a {{title}}
              for {{checkoutArray?.eventDetail?.name}} </h1>
          </div>
          <!-- <div class="page-staps-details">
            <ul>            
              <li class="selected "><span class="fa fa-check-circle"></span>Information</li>
              <li ><span class="fa fa-check-circle"></span>Options Selection</li>
              <li><span class="fa fa-check-circle"></span>Payment</li>
            </ul>
          </div> -->
            <div class="tabs-part-plan">
                <div class="tab-data-plan">
                    <h2>Basic Information </h2>
                    <div class="sponsor-plan">
                        <form [formGroup]="userForm" >
                        <div class="container-fluid">
                            <div class="row">
                            <div class="col-md-4" *ngIf="!userForm.get('stayAnonymous').value">
                                <!-- <mat-label>First Name <i>*</i></mat-label> -->
                                <mat-form-field class="example-full-width">
                                <mat-label>First Name </mat-label>
                                <input formControlName="firstName" (blur)=" displayName()" name="firstName" (keydown.space)="$event.preventDefault();" [maxLength]="15" size="15" matInput placeholder="">
                                </mat-form-field>
                            </div>
                            <div class="col-md-4" *ngIf="!userForm.get('stayAnonymous').value">
                                <!-- <mat-label>First Name <i>*</i></mat-label> -->
                                <mat-form-field class="example-full-width" >
                                <mat-label>Middle Name </mat-label>
                                <input formControlName="middleName" (blur)=" displayName1()"  (keydown.space)="$event.preventDefault();" [maxLength]="15"  matInput placeholder="">
                                </mat-form-field>
                            </div>
                            <div class="col-md-4" *ngIf="!userForm.get('stayAnonymous').value">
                                <!-- <mat-label>Last Name <i>*</i></mat-label> -->
                                <mat-form-field class="example-full-width">
                                <mat-label>Last Name </mat-label>
                                <input formControlName="lastName" (blur)=" displayName2()" (keydown.space)="$event.preventDefault();" [maxLength]="15" size="15" matInput placeholder="">
                                </mat-form-field>
                            </div>
                            <div class="col-md-4">
                                <!-- <mat-label>Email Address <i>*</i></mat-label> -->
                                <mat-form-field class="example-full-width">
                                <mat-label>Email Address </mat-label>
                                <input formControlName="email" (change)="onChangeEmail(userForm.get('email').value)" (keydown.space)="$event.preventDefault();" [maxLength]="50" size="50" matInput placeholder="">
                              </mat-form-field>
                              <span class="receipt-instruction">Note: Provide email if you want a receipt</span>
                            </div>
                            <div class="col-md-4" *ngIf="!userForm.get('stayAnonymous').value">
                                <mat-form-field class="example-full-width">
                                <mat-label>Phone Number  </mat-label>
                                <input appPhoneMask formControlName="phone" [minlength]="10" matInput placeholder="">
                                </mat-form-field>
                            </div>
                            <div class="col-md-4" *ngIf="!userForm.get('stayAnonymous').value">                    
                                <!-- <mat-form-field class="example-full-width add-sponsor">
                                <mat-label>Address <i></i></mat-label>
                                <textarea #placesRef="ngx-places" (onAddressChange)="handleAddressChange($event)" [options]='maploc' formControlName="addressLine1" matInput ngx-google-places-autocomplete></textarea>
                                </mat-form-field> -->
                                <mat-form-field class="example-full-width">
                                <mat-label>Address </mat-label>
                                <input #placesRef="ngx-places" (onAddressChange)="handleAddressChange($event)" [options]='maploc' formControlName="addressLine1" matInput placeholder="" matInput ngx-google-places-autocomplete>
                                </mat-form-field>
                            </div>
                            <!-- <div class="col-md-6">                               
                                <mat-form-field class="example-full-width">
                                <mat-label>City </mat-label>
                                <input (keydown.space)="$event.preventDefault();" formControlName="city" matInput placeholder="">
                                </mat-form-field>
                            </div>
                            <div class="col-md-6">
                                
                                <mat-form-field class="example-full-width">
                                <mat-label>State </mat-label>
                                <input (keydown.space)="$event.preventDefault();" formControlName="state" matInput placeholder="">
                                </mat-form-field>
                            </div>
                            <div class="col-md-6">                                
                                <mat-form-field class="example-full-width">
                                <mat-label>Zipcode <i></i></mat-label>
                                <input (keydown.space)="$event.preventDefault();" [maxLength]="5" size="5" formControlName="zipCode" matInput placeholder="">
                                </mat-form-field>
                            </div>
                            <div class="col-md-6" *ngIf="checkoutArray['url'] != 'donor-checkout-new'">                                
                                <mat-form-field class="example-full-width">
                                <mat-label>Company Name <i></i></mat-label>
                                <input formControlName="companyName" matInput placeholder="">
                                </mat-form-field>
                            </div>
                            <div class="col-md-6" *ngIf="checkoutArray['url'] != 'donor-checkout-new'">                                
                                <mat-form-field class="example-full-width">
                                <mat-label>Company Website <i></i> </mat-label>
                                <input formControlName="companyWebsite" matInput placeholder="">
                                </mat-form-field>
                            </div>
                            <div class="col-md-6">                                
                                <mat-form-field class="example-full-width">
                                <mat-label>Name on the Receipt<i></i></mat-label>
                                <input formControlName="displayName" matInput placeholder=""  >
                                </mat-form-field>
                            </div>
                            <div class="col-md-6" *ngIf="checkoutArray['url'] == 'donor-checkout-new'">
                                <div class="check-box-design">
                                <mat-checkbox class="example-margin" formControlName="stayAnonymous">Stay Anonymous</mat-checkbox>
                                </div>
                            </div> -->
                          <!--   <div class="col-md-6" *ngIf="checkoutArray['url'] != 'donor-checkout-new'">
                                  <h5>Upload Flyer</h5>
                                  <app-file-uploader #imageUpload (invalidFile)="invalidUploadFile()"
                                                  (maxFileError)="maxFileError()" (maxFileSizeError)="fileSizeError()"
                                                  (queueCompleted)="queueCompleted()" (uploadStarted)="uploadStarted()"
                                                  [(uploadedFiles)]="uploadedFlyer" [maxFileCount]="1"
                                                  [uploaderText]="'Upload Flyer'">
                                  </app-file-uploader>
                              </div>-->
                              <!-- <div class="col-md-6" *ngIf="checkoutArray['url'] != 'donor-checkout-new'">
                                  <div class="imageupplan">
                                  <app-file-uploader #imageUpload (invalidFile)="invalidUploadFile()"
                                                  (maxFileError)="maxFileError()" (maxFileSizeError)="fileSizeError()"
                                                  (queueCompleted)="queueCompleted1()" (uploadStarted)="uploadStarted()" [uploadUrl]="uploadUrl"
                                                  [(uploadedFiles)]="uploadedLogo" [validTypes]="validTypesImage" [maxFileCount]="1"
                                                  [uploaderText]="'Upload Logo'">
                                                  
                                  </app-file-uploader>
                                  <h5>Upload logo</h5>
                                  </div>
                              </div> -->
                            <div class="col-md-12" *ngIf="checkoutArray['url'] == 'donor-checkout-without-steps'">
                              <div class="check-box-design">
                                <mat-checkbox class="example-margin" formControlName="stayAnonymous"><b> Stay Anonymous</b></mat-checkbox>
                              </div>
                            </div>
                          </div>
                        </div>
                        </form>                        
                    </div>
                    <div class="tabs-part-plan-amount new-plan">
                        <div class="tab-data-plan-amount">
                            <!-- <div *ngIf="this.checkoutArray['type'] == 'chapter'" class="row" style="padding-top: 9px; margin: 0;">
                              <div class="col-md-12 col-lg-12">
                                <mat-form-field class="col-md-4 chapter-name pull-right mar80" *ngIf="chapterList.length>1">
                                  <mat-label>Select Chapter</mat-label>
                                  <mat-select (selectionChange)="changeChapter();" [(ngModel)]="chapterId">
                                    <mat-option *ngFor="let list of chapterList" value="{{list.id}}">{{list.name}}</mat-option>
                                  </mat-select>
                                </mat-form-field>
                              </div>
                            </div> -->
                            <div *ngIf="categoryList?.length !=0 || isAnonymous" class="plan-main-amount">                             
                                <div *ngFor="let list of this.categoryList;let i = index" class="card-data">
                                  <mat-card>
                                    <div class="box-part-main">
                                      <div class="text-part-amount">
                                        <!-- <h4>$ Donation Amount</h4> -->
                                        <h4>{{list?.categoryName}}</h4>
                                        <h3>Minimun $1</h3>
                                        <!-- <p [innerHTML]="list?.description" class="text-two-ln"></p> -->
                                      </div>
                                      <div class="input-box col-md-6" *ngIf="!isAnonymous">
                                        <mat-form-field class="example-full-width" floatLabel="never" appearance="fill">
                                          <input currencyMask (keypress)="numberOnly($event)"
                                                 [(ngModel)]="list['amount']" [disabled]="!userForm.valid" matInput
                                                 placeholder="Enter Amount" [value]="minAmount" [maxlength]="10">
                                                <!-- <span matPrefix>$</span> -->
                                        </mat-form-field>
                                      </div>
                                      <div class="input-box col-md-6" *ngIf="isAnonymous">
                                        <mat-form-field class="example-full-width" floatLabel="never" appearance="fill">
                                          <input currencyMask type="tel" (keypress)="numberOnly($event)"
                                                 [(ngModel)]="list['amount'] " matInput 
                                                 placeholder="Enter Amount" [value]="minAmount" [maxlength]="10">
                                                 <!-- <span matPrefix>$</span> -->
                                        </mat-form-field>
                                      </div>
                                      <div class="proceed-part">
                                        <button  class=" proceed-btn btn" (click)="changeAmount(list)">Proceed</button>
                                      </div>
                                    </div>
                                  </mat-card>
                                </div>                             
                            </div>
                            <!-- <div *ngIf="isAnonymous" class="plan-main-amount">                             
                              <div *ngFor="let list of this.categoryList;let i = index" class="card-data">
                                <mat-card>
                                  <div class="box-part-main">
                                    <div class="text-part-amount">
                                      <h4>{{list?.categoryName}}</h4>
                                      <h3>Minimun 1$</h3>
                                    </div>
                                    <div class="input-box col-md-6">
                                      <mat-form-field class="example-full-width" floatLabel="never" appearance="fill">
                                        <input (change)="changeAmount(list)" (keypress)="numberOnly($event)"
                                               [(ngModel)]="list['amount']" matInput
                                               placeholder="Enter Amount" [value]="minAmount" [maxlength]="10">
                                              <span matPrefix>$</span>
                                      </mat-form-field>
                                    </div>
                                  </div>
                                </mat-card>
                              </div>                             
                            </div> -->
                          </div>
                    </div>
                    <div class="tabs-part-plan-payment">
                      <div class="tab-data-plan-payment">
                        <div *ngIf="checkoutArray['paymentMethod']?.length !=0 && checkoutArray['finalAmount']" class="row">
                          <div class="col-md-12 col-lg-6">
                            <h2>Make Payment <img src="assets/icon/secure-payment-tlt.svg"></h2>
                          </div>
                          <div *ngIf="paymentType =='AFFINY_PAY'" class="col-md-12 col-lg-6">
                            <div class="card-icon">
                              <ul>
                                <li><img src="assets/images/master-card-new.png"></li>
                                <li><img src="assets/images/visa-new.png"></li>
                                <li><img src="assets/images/american-express-new.png"></li>
                                <li><img src="assets/images/discover-network-new.png"></li>
                              </ul>
                            </div>
                          </div>
                        </div>
            
                        <div class="select-payment-options-part">
                          <mat-tab-group (selectedTabChange)="changeTypeTab($event);" mat-align-tabs="start">
                            <mat-tab *ngFor="let list of checkoutArray['paymentMethod']" data-id="{{list?.achPayment}}"
                                     label="{{list?.value}}">
                              <ng-template mat-tab-label>
                                <i class="fa fa-circle-thin uncheck"></i>
                                <i class="fa fa-check-circle check"></i>
                                {{list?.displayName}}
                              </ng-template>
                              <div *ngIf="paymentType == 'PAYPAL'" class="tab-data-plan">
                                <div class="paypal-data">
                                  <img src="assets/images/paypal.svg">
                                  <p>You will be redirected to PayPal secure Checkout for Payment</p>
                                </div>
                              </div>
                              <div *ngIf=" paymentType =='CLOVER_PAYMENT'" class="tab-data-plan">
                                <div class="card-icon">
                                  <ul>
                                    <li><img src="assets/images/master-card-new.png"></li>
                                    <li><img src="assets/images/visa-new.png"></li>
                                    <li><img src="assets/images/american-express-new.png"></li>
                                    <li><img src="assets/images/discover-network-new.png"></li>
                                  </ul>
                                </div>
                                <app-clover-new (completed)="checkNonce()" *ngIf="paymentType =='CLOVER_PAYMENT' && publicKey!=''"
                                                [(checkoutArray)]="checkoutArray" [publicKey]="publicKey"
                                                [save]="paymentSubject"></app-clover-new>
                              </div>
                            </mat-tab>
                            <!--<mat-tab>
                              <ng-template mat-tab-label>
                                <i class="fa fa-circle-thin uncheck"></i>
                                <i class="fa fa-check-circle check"></i>
                                Credit card
                              </ng-template>
            
                            </mat-tab>
                            <mat-tab>
                              <ng-template mat-tab-label>
                                <i class="fa fa-circle-thin uncheck"></i>
                                <i class="fa fa-check-circle check"></i>
                                Debit card
                              </ng-template>
                              <div class="tab-data-plan">
                                  <div class="card-icon">
                                    <ul>
                                        <li><img src="assets/images/master-card-new.png"></li>
                                        <li><img src="assets/images/visa-new.png"></li>
                                        <li><img src="assets/images/american-express-new.png"></li>
                                        <li><img src="assets/images/discover-network-new.png"></li>
                                    </ul>
                                  </div>
                                  <div class="card-details">
                                      <fieldset>
                                        <legend><img src="assets/icon/secure-payment-green.svg"></legend>
                                          <form class="example-form">
                                              <div class="row">
                                                  <div class="col-md-6">
                                                      <mat-label>Name</mat-label>
                                                      <mat-form-field class="example-full-width" floatLabel="never">
                                                        <input matInput  placeholder="Name on Card" value="">
                                                      </mat-form-field>
                                                  </div>
                                                  <div class="col-md-6">
                                                      <mat-label>Card Number</mat-label>
                                                      <mat-form-field class="example-full-width" floatLabel="never">
                                                        <input matInput placeholder="Enter Card Number" value="">
                                                      </mat-form-field>
                                                  </div>
                                                  <div class="col-md-6">
                                                      <mat-label>Expiry  Date</mat-label>
                                                      <mat-form-field class="example-full-width" floatLabel="never">
                                                        <input matInput placeholder="MM / YY" value="">
                                                        <img matSuffix src="assets/icon/calendar-payment.svg">
                                                      </mat-form-field>
                                                  </div>
                                                  <div class="col-md-6">
                                                      <mat-label>CVV</mat-label>
                                                      <mat-form-field class="example-full-width" floatLabel="never">
                                                        <input matInput placeholder="CVV" value="">
                                                        <img matSuffix src="assets/icon/secure-payment.svg">
                                                      </mat-form-field>
                                                  </div>
                                              </div>
                                          </form>
                                      </fieldset>
                                  </div>
                              </div>
                            </mat-tab>
                            <mat-tab>
                              <ng-template mat-tab-label>
                                <i class="fa fa-circle-thin uncheck"></i>
                                <i class="fa fa-check-circle check"></i>
                                e-Check
                              </ng-template>
                              <div class="tab-data-plan">
                                  <div class="card-icon">
                                    <ul>
                                        <li><img src="assets/images/master-card-new.png"></li>
                                        <li><img src="assets/images/visa-new.png"></li>
                                        <li><img src="assets/images/american-express-new.png"></li>
                                        <li><img src="assets/images/discover-network-new.png"></li>
                                    </ul>
                                  </div>
                                  <div class="col-xs-6 col-md-6 p-0 text-right">
                                      <div class="next-back next">
                                          <button  (click)="changeStep('next')" (click)="openModalWithClass(template)">Pay Now <i class="fa fa-check"></i> </button>
            
                                      </div>
                                  </div>
                              </div>
                            </mat-tab>-->
                          </mat-tab-group>
                          <div *ngIf="publicKey!=''">
                            <app-e-check (completed)="checkNonce()" *ngIf=" checkoutArray?.achPayment == true"
                                         [(checkoutArray)]="checkoutArray" [publicKey]="publicKey"
                                         [save]="paymentSubject"></app-e-check>
                            <app-affiny-pay-new #card (completed)="checkNonce()" *ngIf=" checkoutArray?.achPayment == false && paymentType =='AFFINY_PAY'"
                                                [(checkoutArray)]="checkoutArray" [publicKey]="publicKey"
                                                [save]="paymentsSubject"></app-affiny-pay-new>
                            <app-square class="creditcard" *ngIf="paymentType =='SQUARE_PAYMENT'" (completed)="checkNonce()"
                                          [(checkoutArray)]="checkoutArray"
                                        [publicKey]="publicKey" [locationId]="locationId"  [save]="paymentsSubject"></app-square>
                          </div>
                        </div>
                      </div>
                    </div>
                    <!-- <div class="tems-conditions" *ngIf="isPaymentMode">
                      <h4>
                        <mat-checkbox [(ngModel)]="acceptTerms"></mat-checkbox>
                        Accept <a data-target="#exampleModalTerms" data-toggle="modal">Terms & Conditions</a></h4>
                    </div> -->
                </div>
                <div class="left-footer" *ngIf="isPaymentMode">
                  <div class="row m-0">
                    <div class="col-xs-6 col-md-6 p-0 text-right">
                      <div class="next-back next">
                        <button (click)="changeStep('next')">Pay Now <i class="fa fa-check"></i></button>
                        <ngx-spinner type="ball-scale-multiple"></ngx-spinner>
                      </div>
                    </div>
                  </div>
                </div>
          </div>
          
          <!-- <div class="right-part-plan summaryinmobile login-bg" *ngIf="!authDetail" style="background: url(../../../../assets/images/login-left-bg.png); background-size: cover; background-repeat: no-repeat;">
            <h2>Already Have An Account?</h2>
            <p>If you are already registered user click to Login </p>
            <div class="btn-login">
              <button (click)="openModalWithClass(template)">Login</button>
            </div>
          </div> -->
          <div class="right-part-plan summaryinmobile">
            <h2>Summary</h2>
            <div *ngIf="checkoutArray['summery']" class="table-part">
              <table>
                <tr *ngFor="let list of checkoutArray['summery']">
                  <td>{{list['name']}}</td>
                  <td class="blue-clr-text" nowrap> {{list['value'] | currency:'USD'}} </td>
                </tr>
                <tfoot>
                <tr>
                  <td class="blue-clr-text">Grand Total</td>
                  <td class="blue-clr-text" nowrap> {{this.checkoutArray['finalAmount'] | currency:'USD'}}</td>
                </tr>
                </tfoot>
              </table>
            </div>
          </div>
        </div>
      </div>
      <div class="col-xs-12 col-sm-4 col-md-3  col-lg-3 p-0 summary-not-mobile" >
        <!-- <div class="right-part-plan1 login-bg" *ngIf="!authDetail" style="background: url(../../../../assets/images/login-left-bg.png); background-size: cover; background-repeat: no-repeat;">
          <h2>Already Have An Account?</h2>
          <p>If you are already registered user click to Login </p>
          <div class="btn-login">
            <button (click)="openModalWithClass(template)">Login</button>
          </div>
        </div> -->
        <div class="right-part-plan summary-not-mobile">
          <h2>Summary</h2>
          <div *ngIf="checkoutArray['summery']" class="table-part">
            <table>
              <tr *ngFor="let list of checkoutArray['summery']">
                <td>{{list['name']}}</td>
                <td class="blue-clr-text" nowrap> {{list['value'] | currency:'USD'}} </td>
              </tr>
              <tfoot>
              <tr>
                <td class="blue-clr-text">Grand Total </td>
                <td class="blue-clr-text" nowrap> {{this.checkoutArray['finalAmount'] | currency:'USD'}}</td>
              </tr>
              </tfoot>
            </table>
          </div>
        </div>
      </div>
    </div>
  </section>
<i id="openSuccessModel" (click)="openModalWithClass1(template1)"></i>
<ng-template #template1>
  <div class="modal-body">
    <div class="payment-done">
      <div class="payment-top-part">
        <img src="assets/icon/done-icon.svg">
        <h4>Your Payment is successfully done.</h4>
      </div>
      <div class="payment-info-new">
        <h4>Thank you for the donation !</h4>
        <h4>$ {{checkoutArray['finalAmount']}}</h4>
        <button aria-label="Close" (click)="return()" class="done">Done</button>
      </div>
    </div>
  </div>
</ng-template>

  <div aria-hidden="true" aria-labelledby="exampleModalLabel" class="modal fade" id="exampleModalTerms" role="dialog"
     tabindex="-1">
  <div class="modal-dialog termsmain" role="document">
    <div class="modal-content">
      <div class="modal-header">
        <h5 class="modal-title" id="exampleModalLabel">Terms and Conditions</h5>
        <button aria-label="Close" class="close-container" data-dismiss="modal" id="hideModal" type="button">
          <div class="leftright"></div>
          <div class="rightleft"></div>
        </button>
      </div>
      <div class="modal-body">
        <div class="termscondition">
          <p [innerHTML]="termsAndCondition"></p>
        </div>
      </div>
    </div>
  </div>
</div>

  <ng-template #template>
    <div class="modal-header">
      <h4 class="modal-title">Login For Existing Member</h4>
      <!-- <button type="button" class="close pull-right" aria-label="Close" (click)="modalRef.hide()">
        <span aria-hidden="true">&times;</span>
      </button> -->
    </div>
    <form (ngSubmit)="login()" [formGroup]="loginForm" id="loginForm">
      <div class="modal-body">
        <div class="login-modal">
          <div class="row">
            <div class="col-md-12">
              <mat-form-field class="example-full-width">
                <mat-label>Email or Phone Number</mat-label>
                <input  formControlName="email" [autofocus]="true" id="emailId" tabindex='1' matInput placeholder="" value="">
              </mat-form-field>
            </div>
            <div class="col-md-12">
              <mat-form-field class="example-full-width" >
                <mat-label>Password</mat-label>
                <input formControlName="password" tabindex='2' type="password"  matInput placeholder="" value="">
              </mat-form-field>
            </div>
            <!-- <div class="col-md-12">
                 <div class="forgot-pass">
                     <a href="#">Forgot Password?</a>
                 </div>
             </div>-->
          </div>
        </div>
      </div>
      <div class="modal-footer">
        <div class="row m-0">
          <div class="col-md-12 p-0 text-right">
            <div class="next-back back">
              <button type="button" (click)="modalRef.hide()" aria-label="Close"> Cancel <i class="fa fa-times-circle"></i></button>
            </div>
            <div class="next-back next">
              <button>Login <i class="fa fa-check"></i></button>
            </div>
          </div>
        </div>
      </div>
    </form>
  </ng-template>